<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Lemon &#8212; Lemon master documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/lemon.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/icon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting Started" href="getting_started.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#"><span><img src="_static/icon.svg"></span>
          Lemon</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Navigation <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="constants.html">Useful Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="select.html">Select</a></li>
<li class="toctree-l1"><a class="reference internal" href="prune.html">Prune</a></li>
<li class="toctree-l1"><a class="reference internal" href="count.html">Counting operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="separate.html">Separate</a></li>
<li class="toctree-l1"><a class="reference internal" href="return.html">Handling Custom Returns in C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="return.html#python-alternative">Python alternative</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="geometry.html">Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="xscore.html">XScore/Vina</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmalign.html">TMalign</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="options.html">Read command-line options</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel.html">Launch a <strong>Lemon</strong> workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="count_residues.html">Example Programs for counting residues</a></li>
<li class="toctree-l1"><a class="reference internal" href="small_molecules.html">Example programs for finding ligand interactions</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="getting_started.html" title="Next Chapter: Getting Started"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Getting Started &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="constants.html">Useful Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="select.html">Select</a></li>
<li class="toctree-l1"><a class="reference internal" href="prune.html">Prune</a></li>
<li class="toctree-l1"><a class="reference internal" href="count.html">Counting operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="separate.html">Separate</a></li>
<li class="toctree-l1"><a class="reference internal" href="return.html">Handling Custom Returns in C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="return.html#python-alternative">Python alternative</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="geometry.html">Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="xscore.html">XScore/Vina</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmalign.html">TMalign</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="options.html">Read command-line options</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel.html">Launch a <strong>Lemon</strong> workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="count_residues.html">Example Programs for counting residues</a></li>
<li class="toctree-l1"><a class="reference internal" href="small_molecules.html">Example programs for finding ligand interactions</a></li>
</ul>

<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="lemon">
<h1><strong>Lemon</strong><a class="headerlink" href="#lemon" title="Permalink to this headline">¶</a></h1>
<p><em>a modern C++ library for mining structural information from the PDB</em></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The MacroMolecular Transmission Format (MMTF) is a highly efficient file Format
for the storage and processing of biomolecular data. As of January 2019, the
entire Protein Data Bank (PDB) can be stored in under 10 Gb when using this
format and compressed using the Gzip algorithm. As a result, a copy of the PDB
is availible for <a class="reference external" href="https://mmtf.rcsb.org/download.html">here</a>.</p>
<p>While packages are availible for decoding MMTF structures, these packages do
not provide suitable working environments for exploring and manipulating the
contents of an MMTF file. Further, few packages exist to run PDB-wide
calculations easily, efficiently, and using parallel environments provided by
traditional high-throughput computing clusters. Lemon solves this issue by
providing both a C++-based API for reading PDB Hadoop sequence files and a
parallel environment for launching PDB-wide calculations.
We have deemed these PDB-wide calculations workflows and the remainder of this
document details how to create and run these workflows in both C++ and Python
environments.</p>
</div>
<div class="section" id="obtaining-lemon">
<h2>Obtaining Lemon<a class="headerlink" href="#obtaining-lemon" title="Permalink to this headline">¶</a></h2>
<div class="section" id="c-header-library-and-example-programs">
<h3>C++ header library and example programs<a class="headerlink" href="#c-header-library-and-example-programs" title="Permalink to this headline">¶</a></h3>
<p><strong>Lemon</strong>’s source code is availible under the BSD license and located on
<a class="reference external" href="http://github.com/chopralab/lemon">GitHub</a>. <strong>Lemon</strong> can be obtained using the following commands in a UNIX-like
environment. To build the <strong>C++</strong> side of <strong>Lemon</strong>, you need a C++11 compiler,
the <a class="reference external" href="https://cmake.org">CMake</a> build system.  Note ASYNC features require a C++14 compiler.</p>
<p>For Python support, please install the <em>Python interpreter</em> and C development
libraries for the version of Python you wish to use and sure that this version
of <strong>Python</strong> is the default version used on the command-line.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/chopralab/lemon.git
<span class="nb">cd</span> lemon
mkdir build
<span class="nb">cd</span> build
<span class="c1"># The LEMON_BUILD_PYTHON and LEMON_TEST_ASYNC variables are optional and</span>
<span class="c1"># OFF by default</span>
cmake .. -DCMAKE_BUILD_TYPE<span class="o">=</span>Release <span class="c1"># Give additional build arguments here</span>
cmake --build . -- <span class="c1">#(additional build arguments like -j2 or /m:2)</span>
</pre></div>
</div>
</div>
<div class="section" id="prebuilt-python-module-for-pip">
<h3>Prebuilt <strong>Python</strong> module for <cite>pip</cite><a class="headerlink" href="#prebuilt-python-module-for-pip" title="Permalink to this headline">¶</a></h3>
<p>A prebuilt version of <strong>Lemon</strong> is availible on the <em>Python Package Index</em>
(<a class="reference external" href="https://pypi.org/project/candiy-lemon/">PyPI</a>). It can be installed for recent versions of <strong>Python</strong> (v3.5+). For
Linux platforms, v2.7 is supported as well for legacy reasons. Use the following
command to install it.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m pip install candiy-lemon
</pre></div>
</div>
<p>Note that this package uses the synchronous threading model and is compiled
using a relatively old version of GCC to meet the requirements of the PyPI
service. Therefore, some users may wish to install the package themselves.
See the next section for details.</p>
</div>
<div class="section" id="building-the-python-module-manually">
<h3>Building the <strong>Python</strong> module manually<a class="headerlink" href="#building-the-python-module-manually" title="Permalink to this headline">¶</a></h3>
<p>Users interested in better compiler options can opt to build the <strong>Lemon</strong>
module themselves. This is the only option for supporting older versions of
<strong>Python</strong> and asynchronous threading. Make sure the <cite>python</cite> command
corresponds to the version of <strong>Python</strong> you wish to build the module for.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/chopralab/lemon.git
<span class="nb">cd</span> lemon
python setup.py bdist_wheel --build-type MinSizeRel -- <span class="se">\</span>
  -DPYTHON_EXECUTABLE:FILEPATH<span class="o">=</span><span class="sb">`</span>which python<span class="sb">`</span> <span class="se">\</span>
  <span class="c1"># Other cmake options here</span>
python -m pip install *.whl <span class="c1"># The name of the wheel file is dependant on the python version</span>
</pre></div>
</div>
<p>Please be sure to check the output of the build process to ensure the correct
compiler, <strong>Python</strong> interpreter, and other build options are selected.</p>
</div>
</div>
<div class="section" id="developing-a-lemon-workflow">
<h2>Developing a <strong>Lemon</strong> workflow<a class="headerlink" href="#developing-a-lemon-workflow" title="Permalink to this headline">¶</a></h2>
<p>Lemon supports workflow development in both C++ or Python. We have documented
for both languages is presented side-by-side as to avoid repetition of the same
text and examples.</p>
<p>The underlying philosophy of the Lemon API is that of functional programming.
Therefore, many functions operate on existing structures that the user
initializes and passes to the operations of interest.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#c">C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#python">Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="constants.html">Useful Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="select.html">Select</a><ul>
<li class="toctree-l2"><a class="reference internal" href="select.html#provided-selectors">Provided selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="prune.html">Prune</a><ul>
<li class="toctree-l2"><a class="reference internal" href="prune.html#provided-functions">Provided functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="prune.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="count.html">Counting operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="count.html#provided-selectors">Provided selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="count.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="separate.html">Separate</a></li>
<li class="toctree-l1"><a class="reference internal" href="return.html">Handling Custom Returns in C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="return.html#python-alternative">Python alternative</a></li>
</ul>
</div>
<div class="section" id="miscellaneous-functionality">
<h3>Miscellaneous Functionality<a class="headerlink" href="#miscellaneous-functionality" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="geometry.html">Geometry</a><ul>
<li class="toctree-l2"><a class="reference internal" href="geometry.html#names-of-protein-bond-groups">Names of protein bond groups</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xscore.html">XScore/Vina</a><ul>
<li class="toctree-l2"><a class="reference internal" href="xscore.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tmalign.html">TMalign</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tmalign.html#the-tmscore-function-for-alignment">The TMscore function for alignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmalign.html#example">Example</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="invoking-a-lemon-program">
<h2>Invoking a <strong>Lemon</strong> program<a class="headerlink" href="#invoking-a-lemon-program" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="options.html">Read command-line options</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel.html">Launch a <strong>Lemon</strong> workflow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="parallel.html#c-workflows">C++ Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel.html#python-workflows-using-lemon-python">Python Workflows using lemon_python</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel.html#prefiltering-the-pdb-with-searches-originating-on-rcsb">Prefiltering the PDB with searches originating on RCSB</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel.html#danger-zone-internal-documentation">Danger Zone: Internal documentation!</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="example-workflows">
<h2>Example workflows<a class="headerlink" href="#example-workflows" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="count_residues.html">Example Programs for counting residues</a></li>
<li class="toctree-l1"><a class="reference internal" href="small_molecules.html">Example programs for finding ligand interactions</a></li>
</ul>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
  <footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
    </p>
    <p class="pull-left">
        &copy; Chopra Lab and Purdue University.
    </p>
    <p class="text-center">
        BSD licensed on <a href="https://github.com/chopralab/lemon">Github</a>
    </p>
  </div>
</footer>

  </body>
</html>